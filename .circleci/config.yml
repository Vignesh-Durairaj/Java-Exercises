version: 2.1
orbs:
   codecov: codecov/codecov@1.0.1
jobs:
   build:
      working_directory: ~/Java-Exercises
      docker:
         - image: circleci/openjdk:8-jdk-browsers
      steps:
         - checkout
         - restore_cache:
            key: Java-Exercises-{{ checksum "pom.xml" }}
         - run: mvn dependency:go-offline
         - save_cache: 
            paths:
               - ~/.m2
            key: Java-Exercises-{{ checksum "pom.xml" }}
         - run: mvn package
         - store_test_results: 
            path: target/surefire-reports
         - codecov/upload:
            path: target/my-reports/
         - store_artifacts: 
            path: target/JavaExercises-0.0.1-SNAPSHOT.jar